<template>

  <div class="cards">
    <section class="item show">
      <div class="cover lozaded"
           data-background-image="//cdn.jsdelivr.net/gh/amehime/shoka@30732f13/computer-science/note/cover.jpg"
           data-loaded="true"
           style="background-image: url(&quot;//cdn.jsdelivr.net/gh/amehime/shoka@30732f13/computer-science/note/cover.jpg&quot;);">
        <h2 class="title">二进制杂谈</h2><span>计算机科学</span></div>
      <div class="info">
        <div class="ribbon"><a data-pjax-state="" href="/categories/computer-science/note/" itemprop="url"
                               title="二进制杂谈">二进制杂谈</a></div>
        <div class="inner">
          <ul class="posts">
            <li><a data-pjax-state="" href="/categories/computer-science/note/theme-shoka-doc/"
                   title="Theme Shoka Documentation">Theme Shoka Documentation</a></li>
            <li><a data-pjax-state="" href="/computer-science/note/v2yume-setup-log/"
                   title="V2Yume配置记录">V2Yume配置记录</a>
            </li>
          </ul>
          <div class="meta footer"><span><a data-pjax-state="" href="/categories/computer-science/" itemprop="url"
                                            title="计算机科学"><i
              class="ic i-flag"></i>计算机科学</a> </span><span><i class="ic i-file"></i>1 个子项，6 篇文章</span>
          </div>
          <a class="btn" data-pjax-state="" href="/categories/computer-science/note/" itemprop="url"
             title="二进制杂谈">more...</a></div>
      </div>
    </section>
    <section class="item show">
      <div class="cover lozaded"
           data-background-image="//cdn.jsdelivr.net/gh/amehime/shoka@30732f13/clinical-medicine/graduate/course-1/cover.jpg"
           data-loaded="true"
           style="background-image: url(&quot;//cdn.jsdelivr.net/gh/amehime/shoka@30732f13/clinical-medicine/graduate/course-1/cover.jpg&quot;);">
        <h2 class="title">西医综合-内科学</h2><span>临床医学</span></div>
      <div class="info">
        <div class="ribbon"><a data-pjax-state="" href="/categories/clinical-medicine/graduate/course-1/"
                               itemprop="url" title="西医综合-内科学">西医综合-内科学</a></div>
        <div class="inner">
          <ul class="posts">
            <li><a data-pjax-state=""
                   href="/clinical-medicine/graduate/course-1/chapter-1/"
                   title="第01章 肺部感染性疾病（各型肺炎、肺脓肿）">第01章
              肺部感染性疾病（各型肺炎、肺脓肿）</a></li>
            <li><a data-pjax-state="" href="/clinical-medicine/graduate/course-1/chapter-2/"
                   title="第02章 支气管扩张症">第02章 支气管扩张症</a></li>
            <li><a data-pjax-state="" href="/clinical-medicine/graduate/course-1/chapter-3/"
                   title="第03章 肺结核">第03章 肺结核</a></li>
            <li><a data-pjax-state=""
                   href="/clinical-medicine/graduate/course-1/chapter-4/" title="第04章 慢性支气管炎、慢性阻塞性肺疾病">第04章
              慢性支气管炎、慢性阻塞性肺疾病</a></li>
            <li><a data-pjax-state="" href="/clinical-medicine/graduate/course-1/chapter-5/"
                   title="第05章 支气管哮喘">第05章 支气管哮喘</a></li>
            <li><a data-pjax-state=""
                   href="/clinical-medicine/graduate/course-1/chapter-6/" title="第06章 肺血栓栓塞症与慢性肺源性心脏病">第06章
              肺血栓栓塞症与慢性肺源性心脏病</a></li>
          </ul>
          <div class="meta footer"><span><a data-pjax-state="" href="/categories/clinical-medicine/" itemprop="url"
                                            title="临床医学"><i class="ic i-flag"></i>临床医学</a> </span><span><i
              class="ic i-file"></i>6 篇文章</span></div>
          <a class="btn" data-pjax-state="" href="/categories/clinical-medicine/graduate/course-1/"
             itemprop="url" title="西医综合-内科学">more...</a></div>
      </div>
    </section>
    <section class="item show">
      <div class="cover"
           data-background-image="//cdn.jsdelivr.net/gh/amehime/shoka@30732f13/clinical-medicine/intermediate/course-1/cover.jpg">
        <h2 class="title">内科基础知识</h2><span>临床医学</span></div>
      <div class="info">
        <div class="ribbon"><a data-pjax-state="" href="/categories/clinical-medicine/intermediate/course-1/"
                               itemprop="url" title="内科基础知识">内科基础知识</a></div>
        <div class="inner">
          <ul class="posts">
            <li><a data-pjax-state="" href="/clinical-medicine/intermediate/course-1/symptom-1/"
                   title="症状01 发热">症状01 发热</a></li>
            <li><a data-pjax-state="" href="/clinical-medicine/intermediate/course-1/symptom-2/"
                   title="症状02 咳嗽与咳痰">症状02 咳嗽与咳痰</a></li>
            <li><a data-pjax-state="" href="/clinical-medicine/intermediate/course-1/symptom-3/"
                   title="症状03 咯血">症状03 咯血</a></li>
            <li><a data-pjax-state="" href="/clinical-medicine/intermediate/course-1/symptom-4/"
                   title="症状04 发绀">症状04 发绀</a></li>
            <li><a data-pjax-state="" href="/clinical-medicine/intermediate/course-1/symptom-5/"
                   title="症状05 胸痛">症状05 胸痛</a></li>
            <li><a data-pjax-state="" href="/clinical-medicine/intermediate/course-1/symptom-6/"
                   title="症状06 呼吸困难">症状06 呼吸困难</a></li>
          </ul>
          <div class="meta footer"><span><a data-pjax-state="" href="/categories/clinical-medicine/" itemprop="url"
                                            title="临床医学"><i class="ic i-flag"></i>临床医学</a> </span><span><i
              class="ic i-file"></i>13 篇文章</span></div>
          <a class="btn" data-pjax-state="" href="/categories/clinical-medicine/intermediate/course-1/"
             itemprop="url" title="内科基础知识">more...</a></div>
      </div>
    </section>
    <section class="item show">
      <div class="cover"
           data-background-image="//cdn.jsdelivr.net/gh/amehime/shoka@30732f13/computer-science/java/cover.jpg">
        <h2 class="title">Java</h2><span>计算机科学</span></div>
      <div class="info">
        <div class="ribbon"><a data-pjax-state="" href="/categories/computer-science/java/" itemprop="url"
                               title="Java">Java</a></div>
        <div class="inner">
          <ul class="posts">
            <li><a data-pjax-state="" href="/categories/computer-science/java/course-1/"
                   title="零基础学Java语言-浙江大学-翁恺">零基础学Java语言-浙江大学-翁恺</a></li>
            <li><a data-pjax-state=""
                   href="/categories/computer-science/java/course-2/"
                   title="面向对象程序设计-Java语言-浙江大学-翁恺">面向对象程序设计-Java语言-浙江大学-翁恺</a></li>
          </ul>
          <div class="meta footer"><span><a data-pjax-state="" href="/categories/computer-science/" itemprop="url"
                                            title="计算机科学"><i
              class="ic i-flag"></i>计算机科学</a> </span><span><i class="ic i-file"></i>2 个子项，16 篇文章</span>
          </div>
          <a class="btn" data-pjax-state="" href="/categories/computer-science/java/" itemprop="url" title="Java">more...</a>
        </div>
      </div>
    </section>
    <section class="item show">
      <div class="cover"
           data-background-image="//cdn.jsdelivr.net/gh/amehime/shoka@30732f13/computer-science/mse/cover.jpg"><h2
          class="title">Master of Software Engineering</h2><span>计算机科学</span></div>
      <div class="info">
        <div class="ribbon"><a data-pjax-state="" href="/categories/computer-science/mse/"
                               itemprop="url" title="Master of Software Engineering">Master of Software
          Engineering</a></div>
        <div class="inner">
          <ul class="posts">
            <li><a data-pjax-state="" href="/categories/computer-science/mse/itmd-510/"
                   title="ITMD 510. Object-Oriented App Develop">ITMD 510. Object-Oriented App Develop</a></li>
            <li><a data-pjax-state=""
                   href="/categories/computer-science/mse/itmd-511/"
                   title="ITMD 511. Application Development Methodologies">ITMD 511. Application
              Development Methodologies</a></li>
            <li><a data-pjax-state="" href="/categories/computer-science/mse/itmd-513/"
                   title="ITMD 513. Open Source Programming">ITMD 513. Open Source Programming</a></li>
            <li><a data-pjax-state=""
                   href="/categories/computer-science/mse/itmd-514/" title="ITMD 514. Programming for Data Analytics">ITMD
              514. Programming for
              Data Analytics</a></li>
            <li><a data-pjax-state=""
                   href="/categories/computer-science/mse/itmd-515/" title="ITMD 515. Advanced Software Programming">ITMD
              515. Advanced
              Software Programming</a></li>
            <li><a data-pjax-state=""
                   href="/categories/computer-science/mse/itmd-522/" title="ITMD 522. Data Mining and Machine Learning">ITMD
              522. Data Mining and
              Machine Learning</a></li>
          </ul>
          <div class="meta footer"><span><a data-pjax-state="" href="/categories/computer-science/" itemprop="url"
                                            title="计算机科学"><i
              class="ic i-flag"></i>计算机科学</a> </span><span><i
              class="ic i-file"></i>10 个子项，112 篇文章</span></div>
          <a class="btn" data-pjax-state="" href="/categories/computer-science/mse/"
             itemprop="url" title="Master of Software Engineering">more...</a></div>
      </div>
    </section>
    <section class="item show">
      <div class="cover"
           data-background-image="//cdn.jsdelivr.net/gh/amehime/shoka@30732f13/foreign-language/cover.jpg"><h2
          class="title">外语</h2></div>
      <div class="info">
        <div class="ribbon"><a data-pjax-state="" href="/categories/foreign-language/" itemprop="url"
                               title="外语">外语</a></div>
        <div class="inner">
          <ul class="posts">
            <li><a data-pjax-state="" href="/categories/foreign-language/english/" title="英语">英语</a></li>
          </ul>
          <div class="meta footer"><span><i class="ic i-file"></i>1 个子项，2 篇文章</span></div>
          <a class="btn" data-pjax-state="" href="/categories/foreign-language/" itemprop="url" title="外语">more...</a>
        </div>
      </div>
    </section>
  </div>

</template>

<script lang='ts' setup>
import {ref, reactive, onMounted, onBeforeUnmount} from 'vue'
import {useThemeStore} from "@/store";
import {storeToRefs} from "pinia";


onMounted(() => {

  const show = document.querySelectorAll('section')

  function activeShow(this: any) {
    show.forEach((item) =>
        item.classList.remove('active'));
    this.classList.add('active');
  }

  function activeRemove(this: any) {
    show.forEach((item) =>
        item.classList.remove('active'));
  }

  show.forEach((item) => item.addEventListener('mouseenter', activeShow));
  show.forEach((item) => item.addEventListener('mouseleave', activeRemove));
});

const themeStore = useThemeStore();
const {
  header_text_color,
  grey0,
  color_orange,
  color_pink,
  primary_color,
  grey5,
  color_pink_a3,
  box_bg_shadow
} = storeToRefs(themeStore)
</script>
<style lang="less" scoped>
.cards {
  display: flex;
  margin: 0 auto;
  align-items: center;
  flex-wrap: wrap;
  justify-content: space-between;

  .item.show {
    opacity: 1;
    display: block;
  }

  .item {
    perspective: 62.5rem;

    position: relative;
    color: inherit;
    width: calc(50% - 2rem);
    min-width: calc(50% - 2rem);
    height: 14rem;
    margin: 1rem;
    opacity: 0;

    .cover,
    .info {
      position: absolute;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      border-radius: 0.625rem;
      height: 100%;
      width: 100%;
      -webkit-backface-visibility: hidden;
      backface-visibility: hidden;
      transform-style: preserve-3d;
      transition: ease-in-out 0.6s;

    }

    .cover {
      background-position: center;
      background-size: cover;
      padding: 0.5rem 1rem;
      font-size: 1em;
      color: v-bind(header_text_color);
      overflow: hidden;
      transform: rotateY(0);

      .title {
        margin: 0;
        white-space: normal;
        text-align: center;
      }

      span {
        font-size: 0.75em;
        position: absolute;
        right: 0.9375rem;
        top: 0.625rem;
        padding: 0 0.3125rem;
        border-radius: 0.3125rem;
        box-shadow: 0 0 0.3125rem 0.0625rem rgba(0, 0, 0, 0.6);
        background: rgba(0, 0, 0, 0.5);
      }
    }

    .cover::before {
      position: absolute;
      display: block;
      content: "";
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-image: linear-gradient(135deg, #434343 0, #000 100%);
      opacity: 0.25;
      z-index: -1;
    }

    .info {
      background-color: v-bind(grey0);
      transform: rotateY(-180deg);
      padding: 1rem 1.5rem 4rem;
      justify-content: space-between;

      .ribbon {
        left: -2.5rem;
        margin-bottom: 0.8rem;
        max-width: calc(100% + 2rem);
        display: inline-block;
        align-self: flex-start;
        position: relative;
        padding: 0 1rem 0 2rem;
        border-radius: 0 0.3rem 0.3rem 0;
        background-image: linear-gradient(to right,
        v-bind(color_orange) 0,
        v-bind(color_pink) 100%);
        color: v-bind(grey0);

        a {
          display: block;
          margin: 0;
          text-align: center;
          overflow: hidden;
          white-space: nowrap;
          text-overflow: ellipsis;
        }

        a:hover {
          color: currentColor;
        }
      }

      .ribbon::after {
        content: "";
        position: absolute;
        top: 100%;
        left: 0;
        width: 0;
        height: 0;
        background-color: transparent;
        border-style: solid;
        border-width: 0 1rem 1rem 0;
        border-color: transparent;
        border-right-color: v-bind(color_orange);
        filter: brightness(0.9);
      }


      .inner {
        margin: 0 auto;
        width: 100%;

        ul.posts {
          display: flex;
          flex-wrap: wrap;
          justify-content: space-between;
          align-content: baseline;
          min-height: 5rem;
          overflow: hidden;

          li {
            width: 45%;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
            color: v-bind(primary_color);
          }
        }

        .meta {
          font-size: .8125em;
          color: v-bind(grey5);

          .ic {
            margin-right: 0.0625rem;
          }
        }

        .meta.footer {
          position: absolute;
          bottom: .5rem;
          max-width: calc(100% - 7rem);
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
          justify-content: flex-start;

          span {
            margin-right: .5rem;
          }

        }

        .btn {
          position: absolute;
          bottom: 0;
          right: 0;
          padding: .3rem 1rem;
          border-radius: 1rem 0;
          color: v-bind(grey0);
          background-image: linear-gradient(to right, v-bind(color_pink) 0, v-bind(color_orange) 100%);
        }

        .btn::before {
          position: absolute;
          display: block;
          content: '';
          height: calc(100% - 1rem);
          width: calc(100% - 1rem);
          border-radius: 5rem;
          left: .5rem;
          top: .8rem;
          box-shadow: 0 0 .6rem .6rem v-bind(color_pink_a3);
          background-color: v-bind(color_pink_a3);
        }
      }

    }

    .info {
      --note-border: #8fa4dc;
      --note-bg: #f1f9ff;
      --note-text: #1d4974;
      --note-hover: #1d5fa0;
    }


  }

}

.cards .item {
  position: relative;
  color: inherit;
  width: calc(50% - 2rem);
  min-width: calc(50% - 2rem);
  height: 14rem;
  margin: 1rem;
  opacity: 0;
}

.cards .item.show {
  opacity: 1;
}

.cards .item:nth-child(even) .info {
  transform: rotateY(180deg);
}

.cards .item.active .cover {
  transform: rotateY(180deg);
}

.cards .item.active .info {
  transform: rotateY(0);
  box-shadow: 0 0 2rem v-bind(box_bg_shadow);
}

.cards .item:nth-child(even).active .cover {
  transform: rotateY(-180deg);
}

.cards .item .title .ic {
  font-size: 80%;
}

@media (max-width: 767px) {
  .cards .item {
    width: calc(100% - 1rem) !important;
    min-width: calc(100% - 1rem) !important;
    margin: 1rem 0.5rem !important;
  }
}

@media (max-width: 767px) {
  .cards .item .info {
    padding: 1rem 1rem 4rem;
  }
}

@media (max-width: 767px) {
  .cards .item .info .ribbon {
    left: -2rem;
  }
}
</style>